{"ast":null,"code":"var _jsxFileName = \"/home/vpaligorov/Desktop/PharmacyVendingMachineUI/pvm_ui/src/elements/SharedElements/prescriptions/showPrescriptions.js\";\nimport React from \"react\";\nimport '../../../css/showPrescriptions.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ShowPrescriptions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      platform: navigator.userAgentData.platform,\n      validData: \"\",\n      invalidData: \"\",\n      admin: false,\n      doctor: true,\n      data: \"\"\n    };\n  }\n\n  componentWillMount() {\n    let user = 'doctor';\n\n    if (this.state.platform === \"Android\") {\n      user = 'patient';\n      this.setState({\n        doctor: false\n      });\n    }\n\n    if (sessionStorage.getItem(\"email\") === \"admin@gmail.com\") {\n      this.setState({\n        admin: true\n      });\n      this.setState({\n        doctor: false\n      });\n      user = 'all';\n    }\n\n    let headers = new Headers();\n    headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem(\"email\") + \":\" + sessionStorage.getItem(\"password\")));\n    headers.set('Content-Type', 'application/json');\n    fetch(\"http://localhost:8081/prescriptions/\" + user, {\n      headers: headers\n    }).then(response => response.json()).then(data => {\n      let ValidData = [];\n      let InvalidData = [];\n      data.forEach(element => {\n        if (element.valid) ValidData.push(element);else InvalidData.push(element);\n      });\n      if (ValidData.length !== 0) this.setState({\n        validData: ValidData\n      });\n      if (InvalidData.length !== 0) this.setState({\n        invalidData: InvalidData\n      });\n    });\n  }\n\n  setOnClick(event) {\n    if (event.target.nextSibling.style.display === 'none') event.target.nextSibling.style.display = 'block';else event.target.nextSibling.style.display = 'none';\n  }\n\n  setDelete(id) {\n    let headers = new Headers();\n    headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem('email') + \":\" + sessionStorage.getItem('password')));\n    headers.set('Content-Type', 'application/json');\n    fetch(\"http://localhost:8081/prescriptions\", {\n      method: \"DELETE\",\n      headers: headers,\n      body: JSON.stringify(id)\n    }).then(r => {\n      if (r.status === 200) {\n        window.alert(\"Prescription deleted!\");\n        window.location.reload();\n      } else window.alert(\"Something unexpected happened! Try again!\");\n    });\n  }\n\n  setChangeValid(id, valid) {\n    let headers = new Headers();\n    headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem('email') + \":\" + sessionStorage.getItem('password')));\n    headers.set('Content-Type', 'application/json');\n    fetch(\"http://localhost:8081/prescriptions?valid=\" + valid, {\n      method: \"PUT\",\n      headers: headers,\n      body: JSON.stringify(id)\n    }).then(r => {\n      if (r.status === 200) {\n        window.alert(\"Done! Prescription 'valid' state changed!\");\n        window.location.reload();\n      } else window.alert(\"Something unexpected happened! Try again!\");\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      id: \"showPre\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Prescriptions:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"valid\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Valid Prescriptions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this), this.state.validData ? this.state.validData.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn\",\n            onClick: event => this.setOnClick(event),\n            children: \"Prescription \" + element.id + \" to: \" + element.patient\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            style: {\n              display: 'none'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"div\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"amount\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: element.medicines.map(medicine => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: medicine.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: medicine.quantity\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [medicine.quantity, \" * \", medicine.price, \" = \", medicine.quantity * medicine.price]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 33\n          }, this), this.state.doctor ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn2\",\n              onClick: () => this.setChangeValid([element.id], false),\n              children: \"Make Prescription Invalid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 41\n            }, this)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), this.state.admin ? /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn2\",\n            onClick: () => this.setDelete([element.id]),\n            children: \"Delete Prescription\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 29\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You dont have valid prescriptions yet!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"inValid\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"InValid Prescriptions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this), this.state.invalidData ? this.state.invalidData.map(element => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn\",\n            onClick: event => this.setOnClick(event),\n            children: \"Prescription \" + element.id + \" to: \" + element[\"patient\"]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            style: {\n              display: 'none'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: element.medicines.map(medicine => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: medicine.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: medicine.amount ? medicine.amount : 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [medicine.amount ? medicine.amount : 1, \" * \", medicine.price, \" = \", (medicine.amount ? medicine.amount : 1) * medicine.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 33\n          }, this), this.state.doctor ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn2\",\n              onClick: () => this.setChangeValid([element.id], true),\n              children: \"Make Prescription Valid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 41\n            }, this)\n          }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), this.state.admin ? /*#__PURE__*/_jsxDEV(\"button\", {\n            class: \"btn2\",\n            onClick: () => this.setDelete([element.id]),\n            children: \"Delete Prescription\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n        }, void 0, true)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You dont have invalid prescriptions yet!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default ShowPrescriptions;","map":{"version":3,"sources":["/home/vpaligorov/Desktop/PharmacyVendingMachineUI/pvm_ui/src/elements/SharedElements/prescriptions/showPrescriptions.js"],"names":["React","ShowPrescriptions","Component","constructor","props","state","platform","navigator","userAgentData","validData","invalidData","admin","doctor","data","componentWillMount","user","setState","sessionStorage","getItem","headers","Headers","set","btoa","fetch","then","response","json","ValidData","InvalidData","forEach","element","valid","push","length","setOnClick","event","target","nextSibling","style","display","setDelete","id","method","body","JSON","stringify","r","status","window","alert","location","reload","setChangeValid","render","map","patient","medicines","medicine","name","quantity","price","amount"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../../../css/showPrescriptions.css'\n\nclass ShowPrescriptions extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            platform: navigator.userAgentData.platform,\n            validData: \"\",\n            invalidData: \"\",\n            admin: false,\n            doctor: true,\n            data: \"\"\n        };\n    }\n\n    componentWillMount() {\n        let user = 'doctor';\n        if (this.state.platform === \"Android\") {\n            user = 'patient';\n            this.setState({ doctor: false });\n        }\n        if (sessionStorage.getItem(\"email\") === \"admin@gmail.com\") {\n            this.setState({ admin: true })\n            this.setState({ doctor: false });\n            user = 'all';\n        }\n        let headers = new Headers();\n        headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem(\"email\") + \":\" + sessionStorage.getItem(\"password\")));\n        headers.set('Content-Type', 'application/json');\n        fetch(\"http://localhost:8081/prescriptions/\" + user, {\n            headers: headers\n        })\n            .then(response => response.json())\n            .then(data => {\n                let ValidData = [];\n                let InvalidData = [];\n                data.forEach(element => {\n                    if (element.valid)\n                        ValidData.push(element)\n                    else\n                        InvalidData.push(element)\n                })\n                if (ValidData.length !== 0)\n                    this.setState({ validData: ValidData });\n                if (InvalidData.length !== 0)\n                    this.setState({ invalidData: InvalidData });\n            });\n    }\n\n    setOnClick(event) {\n        if (event.target.nextSibling.style.display === 'none')\n            event.target.nextSibling.style.display = 'block';\n        else\n            event.target.nextSibling.style.display = 'none';\n    }\n\n    setDelete(id) {\n        let headers = new Headers();\n        headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem('email') + \":\" + sessionStorage.getItem('password')));\n        headers.set('Content-Type', 'application/json');\n        fetch(\"http://localhost:8081/prescriptions\", {\n            method: \"DELETE\",\n            headers: headers,\n            body: JSON.stringify(id)\n\n        }).then(r => {\n            if (r.status === 200) {\n                window.alert(\"Prescription deleted!\");\n                window.location.reload()\n            } else\n                window.alert(\"Something unexpected happened! Try again!\");\n        })\n    }\n\n    setChangeValid(id, valid) {\n        let headers = new Headers();\n        headers.set('Authorization', 'Basic ' + btoa(sessionStorage.getItem('email') + \":\" + sessionStorage.getItem('password')));\n        headers.set('Content-Type', 'application/json');\n        fetch(\"http://localhost:8081/prescriptions?valid=\" + valid, {\n            method: \"PUT\",\n            headers: headers,\n            body: JSON.stringify(id)\n\n        }).then(r => {\n            if (r.status === 200) {\n                window.alert(\"Done! Prescription 'valid' state changed!\");\n                window.location.reload()\n            } else\n                window.alert(\"Something unexpected happened! Try again!\");\n        })\n    }\n\n    render() {\n        return (<div className=\"content\" id=\"showPre\">\n            <h1>Prescriptions:</h1>\n            <hr></hr>\n            <div id=\"valid\">\n                <h2>Valid Prescriptions:</h2>\n                {\n                    this.state.validData ?\n                        this.state.validData.map((element) =>\n                            <div>\n                                <button class=\"btn\"\n                                    onClick={(event) => this.setOnClick(event)}>{\"Prescription \" + element.id + \" to: \" + element.patient}</button>\n                                <table style={{ display: 'none' }}>\n                                    <div class=\"div\">\n                                        <thead>\n                                            <tr>\n                                                <th>name</th>\n                                                <th>amount</th>\n                                                <th>price</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {element.medicines.map(medicine =>\n                                                <tr>\n                                                    <td>{medicine.name}</td>\n                                                    <td>{medicine.quantity}</td>\n                                                    <td>{medicine.quantity} * {medicine.price} = {(medicine.quantity) * medicine.price}</td>\n                                                </tr>\n                                            )}\n                                        </tbody>\n                                    </div>\n\n                                </table>                                    \n                                {this.state.doctor ?\n                                    <>\n                                        <button class=\"btn2\"\n                                            onClick={() => this.setChangeValid([element.id], false)}>Make\n                                            Prescription Invalid\n                                        </button>\n                                    </  >\n                                    : <></>}\n                                {this.state.admin ?\n                                    <button class=\"btn2\" onClick={() => this.setDelete([element.id])}>Delete\n                                        Prescription\n                                    </button>\n                                    : <></>\n                                }\n                            </div>\n                        )\n                        : <p>You dont have valid prescriptions yet!</p>\n                }\n            </div>\n            <div id=\"inValid\">\n                <h2>InValid Prescriptions:</h2>\n                {\n                    this.state.invalidData ?\n                        this.state.invalidData.map((element) =>\n                            <>\n                                <button class=\"btn\"\n                                    onClick={(event) => this.setOnClick(event)}>{\"Prescription \" + element.id + \" to: \" + element[\"patient\"]}</button>\n                                <table style={{ display: 'none' }}>\n                                    <thead>\n                                        <tr>\n                                            <th>name</th>\n                                            <th>amount</th>\n                                            <th>price</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {element.medicines.map(medicine =>\n                                            <tr>\n                                                <td>{medicine.name}</td>\n                                                <td>{medicine.amount ? medicine.amount : 1}</td>\n                                                <td>{medicine.amount ? medicine.amount : 1} * {medicine.price} = {(medicine.amount ? medicine.amount : 1) * medicine.price}</td>\n                                            </tr>\n                                        )}\n                                    </tbody>\n\n                                </table>\n                                {this.state.doctor ?\n                                    <>\n                                        <button class=\"btn2\"\n                                            onClick={() => this.setChangeValid([element.id], true)}>Make\n                                            Prescription Valid\n                                        </button>\n                                    </>\n                                    : <></>}\n                                {this.state.admin ?\n                                    <button class=\"btn2\" onClick={() => this.setDelete([element.id])}>Delete\n                                        Prescription\n                                    </button>\n                                    : <></>\n                                }\n                            </>\n                        )\n                        : <p>You dont have invalid prescriptions yet!</p>\n                }\n            </div>\n        </div>)\n    }\n}\n\nexport default ShowPrescriptions;"]},"metadata":{},"sourceType":"module"}
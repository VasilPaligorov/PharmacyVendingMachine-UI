{"ast":null,"code":"var _jsxFileName = \"/home/vaskopaligorov/Desktop/pvm_ui/src/elements/Admin/medicines/createMedicine.js\";\nimport React from \"react\";\nimport { toast } from 'react-toastify';\nimport \"../../../css/createMedicine.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass CreateMedicine extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getMedicine = event => {\n      this.setState({\n        medicine: event.target.value\n      });\n    };\n\n    this.getNeedsPrescription = event => {\n      this.setState({\n        needsPrescription: event.target.value\n      });\n    };\n\n    this.getAmount = event => {\n      this.setState({\n        amount: event.target.value\n      });\n    };\n\n    this.getPrice = event => {\n      this.setState({\n        price: event.target.value\n      });\n    };\n\n    this.getSlotID = event => {\n      this.setState({\n        slotID: event.target.value\n      });\n    };\n\n    this.state = {\n      medicine: \"\",\n      needsPrescription: null,\n      names: [],\n      url: null,\n      amount: '',\n      price: '',\n      currentMedicine: '',\n      slotID: '',\n      medicines: []\n    };\n    this.getMedicine = this.getMedicine.bind(this);\n    this.getNeedsPrescription = this.getNeedsPrescription.bind(this);\n    this.getAmount = this.getAmount.bind(this);\n    this.getPrice = this.getPrice.bind(this);\n    this.getSlotID = this.getSlotID.bind(this);\n  }\n\n  componentDidMount() {\n    const url = new URL(window.location.href);\n\n    if (url.pathname === '/addMedicineToMachine') {\n      this.setState({\n        pathname: url.pathname\n      });\n      let headers = new Headers();\n      headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\")));\n      headers.set('Content-Type', 'application/json');\n      fetch(\"http://localhost:8081/medicines\", {\n        headers: headers\n      }).then(response => response.json()).then(data => {\n        let names = [];\n        data.forEach(element => {\n          names.push(element.name);\n        });\n        names.sort();\n        this.setState({\n          names: names\n        });\n        this.setState({\n          medicines: data.sort((a, b) => a.name.localeCompare(b.name))\n        });\n      });\n    }\n  }\n\n  createMedicine() {\n    this.form = document.querySelector('#create-account-form');\n    this.medicineInput = document.querySelector('#medicine');\n    this.needsPrescriptionInput = document.querySelector('#needsPrescription');\n    this.amountInput = document.querySelector('#amount');\n    this.priceInput = document.querySelector('#price');\n    this.slotInput = document.querySelector('#slotID');\n    this.validateForm();\n\n    if (this.isFormValid() === true) {\n      if (this.state.pathname) {\n        let headers = new Headers();\n        headers.set('Content-Type', 'application/json');\n        headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem('email') + \":\" + localStorage.getItem('password')));\n        fetch(sessionStorage.getItem(\"machineIP\") + \"/medicines\", {\n          method: \"POST\",\n          headers: headers,\n          body: JSON.stringify({\n            \"name\": this.state.medicine,\n            \"price\": this.state.price,\n            \"amount\": this.state.amount,\n            \"needsPrescription\": this.state.currentMedicine.needsPrescription\n          })\n        }).then(r => {\n          if (r.status === 200) {\n            fetch(sessionStorage.getItem(\"machineIP\") + \"/configuration/router/mapping\", {\n              method: \"GET\",\n              headers: headers\n            }).then(response => response.json()).then(data => {\n              data.push({\n                \"medicineName\": this.state.medicine,\n                \"slotID\": this.state.slotID\n              });\n              fetch(sessionStorage.getItem(\"machineIP\") + \"/configuration/router/mapping\", {\n                method: \"POST\",\n                headers: headers,\n                body: JSON.stringify(data)\n              }).then(resp => {\n                if (resp.status === 200) {\n                  toast.success(\"Medicine created!\");\n                } else {\n                  toast.error(\"Invalid slot ID\");\n                  this.setError(this.slotInput, \"This slod is already taken!\");\n                  fetch(sessionStorage.getItem(\"machineIP\") + '/medicines?name=' + this.state.medicine, {\n                    method: \"DELETE\",\n                    headers: headers\n                  });\n                }\n              });\n            });\n          } else if (r.status === 302) {\n            fetch(sessionStorage.getItem(\"machineIP\") + \"/medicines?name=\" + this.state.currentMedicine.name, {\n              method: \"PUT\",\n              headers: headers,\n              body: JSON.stringify({\n                \"name\": this.state.currentMedicine.name,\n                \"price\": this.state.price,\n                \"amount\": this.state.amount,\n                \"needsPrescription\": this.state.currentMedicine.needsPrescription\n              })\n            }).then(response => {\n              if (response.status === 200) toast.success(\"Medicine updated\");else toast.error(\"Something unexpected heppened! Try again.\");\n            });\n          } else toast.error(\"Something unexpected heppened! Try again.\");\n        });\n      } else {\n        let headers = new Headers();\n        headers.set('Content-Type', 'application/json');\n        headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem('email') + \":\" + localStorage.getItem('password')));\n        fetch(\"http://localhost:8081/medicines\", {\n          method: \"POST\",\n          headers: headers,\n          body: JSON.stringify([{\n            \"name\": this.state.medicine,\n            \"needsPrescription\": this.state.needsPrescription\n          }])\n        }).then(r => {\n          if (r.status === 200) {\n            toast.success(\"Medicine created!\");\n          } else if (r.status === 302) {\n            toast.error(\"Medicine already exists!\");\n            this.setError(this.medicineInput, \"Medicine already exists!\");\n          } else {\n            toast.error(\"Something unexpected happened! Try again.\");\n            this.setError(this.medicineInput, \"Something unexpected happened! Try again.\");\n          }\n        });\n      }\n    }\n  }\n\n  validateForm() {\n    if (this.state.pathname) {\n      if (!this.state.names.includes(this.state.medicine)) {\n        this.setError(this.medicineInput, \"Invalid medicine\");\n      } else {\n        this.state.medicines.forEach(element => {\n          if (element.name === this.state.medicine) this.setState({\n            currentMedicine: element\n          });\n        });\n        this.setSuccess(this.medicineInput);\n      }\n\n      if (this.state.amount.trim() === '') {\n        this.setError(this.amountInput, 'Enter amount');\n      } else {\n        this.setSuccess(this.amountInput);\n      }\n\n      if (this.state.price.trim() === '') {\n        this.setError(this.priceInput, 'Enter price');\n      } else {\n        this.setSuccess(this.priceInput);\n      }\n\n      if (this.state.slotID.trim() === '') {\n        this.setError(this.slotInput, 'Provide slot id');\n      } else {\n        this.setSuccess(this.slotInput);\n      }\n    } else {\n      if (this.state.medicine.trim() === '') {\n        this.setError(this.medicineInput, 'Provide medicine');\n      } else {\n        this.setSuccess(this.medicineInput);\n      }\n\n      if (this.state.needsPrescription === null) {\n        this.setError(this.needsPrescriptionInput, \"Invalid input!\");\n      } else this.setSuccess(this.needsPrescriptionInput);\n    }\n  }\n\n  isFormValid() {\n    const inputContainers = this.form.querySelectorAll('.input-group');\n    let result = true;\n    inputContainers.forEach(container => {\n      if (container.classList.contains('error')) {\n        result = false;\n      }\n    });\n    return result;\n  }\n\n  setError(element, errorMessage) {\n    const parent = element.parentElement;\n\n    if (parent.classList.contains('success')) {\n      parent.classList.remove('success');\n    }\n\n    parent.classList.add('error');\n    const paragraph = parent.querySelector('p');\n    paragraph.textContent = errorMessage;\n  }\n\n  setSuccess(element) {\n    const parent = element.parentElement;\n\n    if (parent.classList.contains('error')) {\n      parent.classList.remove('error');\n    }\n\n    parent.classList.add('success');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"login\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"create-account-form\",\n        className: \"content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Add medicines\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this), this.state.pathname ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"medicine\",\n              children: \"Medicine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              list: \"medicines\",\n              name: \"medicine\",\n              value: this.state.medicineInput,\n              onChange: event => {\n                this.getMedicine(event);\n              },\n              id: \"medicine\",\n              autoComplete: \"off\",\n              placeholder: \"Choose medicine:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n              id: \"medicines\",\n              children: this.state.names.map(element => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: element\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"amount\",\n              children: \"Total amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"amount\",\n              value: this.state.amountInput,\n              onChange: event => {\n                this.getAmount(event);\n              },\n              id: \"amount\",\n              autoComplete: \"off\",\n              placeholder: \"Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"price\",\n              children: \"Medicine Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.01\",\n              name: \"price\",\n              value: this.state.priceInput,\n              onChange: event => {\n                this.getPrice(event);\n              },\n              id: \"price\",\n              autoComplete: \"off\",\n              placeholder: \"Price:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"slotId\",\n              children: \"Slot ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"slotId\",\n              value: this.state.slotIput,\n              onChange: event => {\n                this.getSlotID(event);\n              },\n              id: \"slotID\",\n              autoComplete: \"off\",\n              placeholder: \"Slot ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"medicine\",\n              children: \"medicine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"medicine\",\n              value: this.state.medicineInput,\n              onChange: event => {\n                this.getMedicine(event);\n              },\n              id: \"medicine\",\n              autoComplete: \"off\",\n              placeholder: \"Choose medicine:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"needsPrescription\",\n              children: \"Needs Prescription\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"needsPrescription\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"passive\",\n                onClick: event => {\n                  event.target.className = 'active';\n                  event.target.nextSibling.className = 'passive';\n                  this.setState({\n                    needsPrescription: true\n                  });\n                },\n                children: \"needs prescription\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"passive\",\n                onClick: event => {\n                  event.target.className = 'active';\n                  event.target.previousSibling.className = 'passive';\n                  this.setState({\n                    needsPrescription: false\n                  });\n                },\n                children: \"doesn't need prescription\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Error Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn\",\n          onClick: () => this.createMedicine(),\n          children: \"Create Medicine\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default CreateMedicine;","map":{"version":3,"sources":["/home/vaskopaligorov/Desktop/pvm_ui/src/elements/Admin/medicines/createMedicine.js"],"names":["React","toast","CreateMedicine","Component","constructor","props","getMedicine","event","setState","medicine","target","value","getNeedsPrescription","needsPrescription","getAmount","amount","getPrice","price","getSlotID","slotID","state","names","url","currentMedicine","medicines","bind","componentDidMount","URL","window","location","href","pathname","headers","Headers","set","btoa","localStorage","getItem","fetch","then","response","json","data","forEach","element","push","name","sort","a","b","localeCompare","createMedicine","form","document","querySelector","medicineInput","needsPrescriptionInput","amountInput","priceInput","slotInput","validateForm","isFormValid","sessionStorage","method","body","JSON","stringify","r","status","resp","success","error","setError","includes","setSuccess","trim","inputContainers","querySelectorAll","result","container","classList","contains","errorMessage","parent","parentElement","remove","add","paragraph","textContent","render","map","slotIput","className","nextSibling","previousSibling"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { toast } from 'react-toastify';\nimport \"../../../css/createMedicine.css\"\n\nclass CreateMedicine extends React.Component {\n    form;\n    medicineInput;\n    needsPrescriptionInput;\n    amountInput;\n    priceInput;\n    slotInput\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            medicine: \"\", needsPrescription: null, names: [], url: null, amount: '', price: '', currentMedicine: '', slotID: '', medicines: []\n        };\n        this.getMedicine = this.getMedicine.bind(this);\n        this.getNeedsPrescription = this.getNeedsPrescription.bind(this);\n        this.getAmount = this.getAmount.bind(this);\n        this.getPrice = this.getPrice.bind(this);\n        this.getSlotID = this.getSlotID.bind(this);\n    }\n\n    getMedicine = (event) => {\n        this.setState({\n            medicine: event.target.value\n        })\n    };\n\n    getNeedsPrescription = (event) => {\n        this.setState({\n            needsPrescription: event.target.value\n        })\n    };\n\n    getAmount = (event) => {\n        this.setState({\n            amount: event.target.value\n        })\n    };\n\n    getPrice = (event) => {\n        this.setState({\n            price: event.target.value\n        })\n    };\n\n    getSlotID = (event) => {\n        this.setState({\n            slotID: event.target.value\n        })\n    };\n\n    componentDidMount() {\n        const url = new URL(window.location.href);\n\n        if (url.pathname === '/addMedicineToMachine') {\n            this.setState({ pathname: url.pathname });\n            let headers = new Headers();\n            headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem(\"email\") + \":\" + localStorage.getItem(\"password\")));\n            headers.set('Content-Type', 'application/json');\n            fetch(\"http://localhost:8081/medicines\", {\n                headers: headers,\n            })\n                .then(response => response.json())\n                .then(data => {\n                    let names = []\n                    data.forEach(element => {\n                        names.push(element.name)\n                    })\n                    names.sort();\n                    this.setState({ names: names })\n                    this.setState({ medicines: data.sort((a, b) => a.name.localeCompare(b.name)) })\n                })\n        }\n\n    }\n\n    createMedicine() {\n        this.form = document.querySelector('#create-account-form');\n        this.medicineInput = document.querySelector('#medicine');\n        this.needsPrescriptionInput = document.querySelector('#needsPrescription');\n        this.amountInput = document.querySelector('#amount');\n        this.priceInput = document.querySelector('#price');\n        this.slotInput = document.querySelector('#slotID');\n\n        this.validateForm();\n        if (this.isFormValid() === true) {\n            if (this.state.pathname) {\n                let headers = new Headers();\n                headers.set('Content-Type', 'application/json');\n                headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem('email') + \":\" + localStorage.getItem('password')));\n                fetch(sessionStorage.getItem(\"machineIP\") + \"/medicines\", {\n                    method: \"POST\",\n                    headers: headers,\n                    body: JSON.stringify(\n                        {\n                            \"name\": this.state.medicine,\n                            \"price\": this.state.price,\n                            \"amount\": this.state.amount,\n                            \"needsPrescription\": this.state.currentMedicine.needsPrescription\n                        }\n                    )\n\n                }).then(r => {\n                    if (r.status === 200) {\n                        fetch(sessionStorage.getItem(\"machineIP\") + \"/configuration/router/mapping\", {\n                            method: \"GET\",\n                            headers: headers,\n                        })\n                            .then(response => response.json())\n                            .then(data => {\n                                data.push({\n                                    \"medicineName\": this.state.medicine,\n                                    \"slotID\": this.state.slotID\n                                })\n                                fetch(sessionStorage.getItem(\"machineIP\") + \"/configuration/router/mapping\", {                        \n                                    method: \"POST\",\n                                    headers: headers,\n                                    body: JSON.stringify(data)\n                                }).then(resp => {\n                                    if (resp.status === 200) {\n                                        toast.success(\"Medicine created!\")\n                                    } else {\n                                        toast.error(\"Invalid slot ID\")\n                                        this.setError(this.slotInput, \"This slod is already taken!\")\n                                        fetch(sessionStorage.getItem(\"machineIP\") + '/medicines?name=' + this.state.medicine, {\n                                            method: \"DELETE\",\n                                            headers: headers\n                                        })\n                                    }\n                                })\n                            })\n                    }\n                    else if(r.status === 302){\n                        fetch(sessionStorage.getItem(\"machineIP\") + \"/medicines?name=\" + this.state.currentMedicine.name, {\n                            method: \"PUT\",\n                            headers: headers,\n                            body: JSON.stringify(\n                                {\n                                    \"name\": this.state.currentMedicine.name,\n                                    \"price\": this.state.price,\n                                    \"amount\": this.state.amount,\n                                    \"needsPrescription\": this.state.currentMedicine.needsPrescription\n                                }\n                            )\n\n                        }).then(response => {\n                            if (response.status === 200)\n                                toast.success(\"Medicine updated\");\n                            else\n                                toast.error(\"Something unexpected heppened! Try again.\")\n                        })\n                    }\n                    else\n                        toast.error(\"Something unexpected heppened! Try again.\")\n                })\n\n            } else {\n                let headers = new Headers();\n                headers.set('Content-Type', 'application/json');\n                headers.set('Authorization', 'Basic ' + btoa(localStorage.getItem('email') + \":\" + localStorage.getItem('password')));\n                fetch(\"http://localhost:8081/medicines\", {\n                    method: \"POST\",\n                    headers: headers,\n                    body: JSON.stringify([\n                        {\n                            \"name\": this.state.medicine,\n                            \"needsPrescription\": this.state.needsPrescription\n                        }\n                    ])\n\n                }).then(r => {\n                    if (r.status === 200) {\n                        toast.success(\"Medicine created!\");\n                    }\n                    else if (r.status === 302) {\n                        toast.error(\"Medicine already exists!\");\n                        this.setError(this.medicineInput, \"Medicine already exists!\")\n                    }\n                    else {\n                        toast.error(\"Something unexpected happened! Try again.\");\n                        this.setError(this.medicineInput, \"Something unexpected happened! Try again.\")\n                    }\n                })\n            }\n\n        }\n    }\n\n\n    validateForm() {\n        if (this.state.pathname) {\n            if (!this.state.names.includes(this.state.medicine)) {\n                this.setError(this.medicineInput, \"Invalid medicine\");\n            } else {\n                this.state.medicines.forEach((element) => {\n                    if (element.name === this.state.medicine)\n                        this.setState({ currentMedicine: element })\n                })\n                this.setSuccess(this.medicineInput);\n            }\n\n            if (this.state.amount.trim() === '') {\n                this.setError(this.amountInput, 'Enter amount');\n            } else {\n                this.setSuccess(this.amountInput)\n            }\n\n            if (this.state.price.trim() === '') {\n                this.setError(this.priceInput, 'Enter price');\n            } else {\n                this.setSuccess(this.priceInput)\n            }\n\n            if (this.state.slotID.trim() === '') {\n                this.setError(this.slotInput, 'Provide slot id');\n            } else {\n                this.setSuccess(this.slotInput)\n            }\n        }\n\n        else {\n            if (this.state.medicine.trim() === '') {\n                this.setError(this.medicineInput, 'Provide medicine');\n            } else {\n                this.setSuccess(this.medicineInput)\n            }\n            if (this.state.needsPrescription === null) {\n                this.setError(this.needsPrescriptionInput, \"Invalid input!\");\n            } else\n                this.setSuccess(this.needsPrescriptionInput);\n        }\n    }\n\n\n    isFormValid() {\n        const inputContainers = this.form.querySelectorAll('.input-group');\n        let result = true;\n        inputContainers.forEach((container) => {\n            if (container.classList.contains('error')) {\n                result = false;\n            }\n        });\n        return result;\n    }\n\n    setError(element, errorMessage) {\n        const parent = element.parentElement;\n        if (parent.classList.contains('success')) {\n            parent.classList.remove('success');\n        }\n        parent.classList.add('error');\n        const paragraph = parent.querySelector('p');\n        paragraph.textContent = errorMessage;\n    }\n\n    setSuccess(element) {\n        const parent = element.parentElement;\n        if (parent.classList.contains('error')) {\n            parent.classList.remove('error');\n        }\n        parent.classList.add('success');\n    }\n\n    render() {\n        return (\n            <div id=\"login\">\n                <form id=\"create-account-form\" className=\"content\">\n                    <div className=\"title\">\n                        <h2>Add medicines</h2>\n                    </div>\n                    {\n                        this.state.pathname ?\n                            <>\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"medicine\">Medicine</label>\n                                    <input list=\"medicines\" name=\"medicine\" value={this.state.medicineInput} onChange={event => {\n                                        this.getMedicine(event)\n                                    }} id=\"medicine\" autoComplete=\"off\"\n                                        placeholder=\"Choose medicine:\" />\n                                    <datalist id=\"medicines\">\n                                        {this.state.names.map(element =>\n                                            <option value={element} />\n                                        )}\n                                    </datalist>\n                                    <p>Error Message</p>\n                                </div>\n\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"amount\">Total amount</label>\n                                    <input type=\"number\" name=\"amount\" value={this.state.amountInput} onChange={event => {\n                                        this.getAmount(event)\n                                    }} id=\"amount\" autoComplete=\"off\"\n                                        placeholder=\"Amount:\" />\n                                    <p>Error Message</p>\n                                </div>\n\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"price\">Medicine Price</label>\n                                    <input type=\"number\" step=\"0.01\" name=\"price\" value={this.state.priceInput} onChange={event => {\n                                        this.getPrice(event)\n                                    }} id=\"price\" autoComplete=\"off\"\n                                        placeholder=\"Price:\" />\n                                    <p>Error Message</p>\n                                </div>\n\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"slotId\">Slot ID</label>\n                                    <input type=\"number\" name=\"slotId\" value={this.state.slotIput} onChange={event => {\n                                        this.getSlotID(event)\n                                    }} id=\"slotID\" autoComplete=\"off\"\n                                        placeholder=\"Slot ID:\" />\n                                    <p>Error Message</p>\n                                </div>\n                            </>\n\n                            : <>\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"medicine\">medicine</label>\n                                    <input name=\"medicine\" value={this.state.medicineInput} onChange={event => {\n                                        this.getMedicine(event)\n                                    }} id=\"medicine\" autoComplete=\"off\"\n                                        placeholder=\"Choose medicine:\" />\n                                    <p>Error Message</p>\n                                </div>\n\n                                <div className=\"input-group\">\n                                    <label htmlFor=\"needsPrescription\">Needs Prescription</label>\n                                    <div id=\"needsPrescription\">\n                                        <button type=\"button\" className=\"passive\" onClick={(event) => { event.target.className = 'active'; event.target.nextSibling.className = 'passive'; this.setState({ needsPrescription: true }) }}>needs prescription</button>\n                                        <button type=\"button\" className=\"passive\" onClick={(event) => { event.target.className = 'active'; event.target.previousSibling.className = 'passive'; this.setState({ needsPrescription: false }) }}>doesn't need prescription</button>\n                                    </div>\n                                    <p>Error Message</p>\n                                </div>\n                            </>\n                    }\n\n                    <button type=\"button\" className=\"btn\" onClick={() => this.createMedicine()}>Create Medicine</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default CreateMedicine"]},"metadata":{},"sourceType":"module"}